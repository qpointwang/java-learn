# java-learn

## 1. JVM
### 1.1 虚拟机栈的异常状况

在Java虚拟机规范中，对Java虚拟机栈规定了两种异常的状况：

* 如果线程请求的栈深度大于虚拟机所允许的深度，将抛出StackOverflowError异常；
* 如果虚拟机栈可以动态扩展，如果扩展时无法申请到足够的内存，将抛出OutOfMemoryError异常。

#### 1.1.1 StackOverflowError

JVM会为每个线程的虚拟机栈分配一定的内存大小（-Xss1024k，默认为1024k），因此虚拟机栈能够容纳的栈帧数量是有限的，若栈帧不断进栈而不出栈，最终会导致当前线程虚拟机栈的内存空间耗尽，典型如一个无结束条件的递归函数调用。

#### 1.1.2 OutOfMemoryError

不同于StackOverflowError，OutOfMemoryError指的是当整个虚拟机栈内存耗尽，并且无法再申请到新的内存时抛出的异常。

JVM未提供设置整个虚拟机栈占用内存的配置参数。虚拟机栈的最大内存大致上等于“JVM进程能占用的最大内存（依赖于具体操作系统） - 最大堆内存 - 最大方法区内存 - 程序计数器内存（可以忽略不计） - JVM进程本身消耗内存”。当虚拟机栈能够使用的最大内存被耗尽后，便会抛出OutOfMemoryError。